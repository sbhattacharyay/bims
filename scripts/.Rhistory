list_of_preds[[i]][[j]]$mf_pred,
list_of_preds[[i]][[j]]$sm_pred,
list_of_preds[[i]][[j]]$wv_pred),
rep(list(list_of_preds[[i]][[j]]$ground_truth),6))
plot_title<-switch(j,
"TOD & GOSE",
"TFR & GOSE",
"TOD & Favorable GOSE",
"TFR & Favorable GOSE",
"TOD & Death",
"TFR & Death")
print(paste0(filePath,plot_title,".png"))
png(paste0(filePath,plot_title,".png"))
plot(out$perf, col="grey82", lty=3)
plot(out$perf, col="red", avg="vertical", add=TRUE)
title (paste("5-fold CV AUC:",plot_title))
dev.off()
}
}
}
#draw_auc_plots(self_val_predictionsDis)
#draw_auc_plots(self_val_predictions12mo)
draw_auc_plots(test_val_predictionsDis)
draw_auc_plots <- function(list_of_preds){
for(i in seq_along(list_of_preds)){
filePath = generateRootDir(paste0(deparse(substitute(list_of_preds)),"/Fold",i,"/"))
dir.create(filePath, recursive=TRUE,showWarnings = FALSE)
for(j in seq_along(list_of_preds[[i]])){
out<-cvAUC(list(list_of_preds[[i]][[j]]$bp_pred,
list_of_preds[[i]][[j]]$fe_pred,
list_of_preds[[i]][[j]]$fp_pred,
list_of_preds[[i]][[j]]$mf_pred,
list_of_preds[[i]][[j]]$sm_pred,
list_of_preds[[i]][[j]]$wv_pred),
rep(list(list_of_preds[[i]][[j]]$ground_truth),6))
plot_title<-switch(j,
"TOD & GOSE",
"TFR & GOSE",
"TOD & Favorable GOSE",
"TFR & Favorable GOSE",
"TOD & Death",
"TFR & Death")
print(paste0(filePath,plot_title,".png"))
png(paste0(filePath,plot_title,".png"))
plot(out$perf, col="grey82", lty=3)
plot(out$perf, col="red", avg="vertical", add=TRUE)
title (paste("5-fold CV AUC:",plot_title))
dev.off()
}
}
}
#draw_auc_plots(self_val_predictionsDis)
#draw_auc_plots(self_val_predictions12mo)
draw_auc_plots(test_val_predictionsDis)
dir.exists("../plots/2020-04-26/test_val_predictionsDis/Fold1/")
dir.create("../plots/2020-04-26/test_val_predictionsDis/Fold1/")
dir.create("../plots/2020-04-26/test_val_predictionsDis/Fold1/",recursive=TRUE)
draw_auc_plots <- function(list_of_preds){
for(i in seq_along(list_of_preds)){
filePath = generateRootDir(paste0(deparse(substitute(list_of_preds)),"/Fold",i,"/"))
print(filePath)
dir.create(filePath, recursive=TRUE,showWarnings = FALSE)
for(j in seq_along(list_of_preds[[i]])){
out<-cvAUC(list(list_of_preds[[i]][[j]]$bp_pred,
list_of_preds[[i]][[j]]$fe_pred,
list_of_preds[[i]][[j]]$fp_pred,
list_of_preds[[i]][[j]]$mf_pred,
list_of_preds[[i]][[j]]$sm_pred,
list_of_preds[[i]][[j]]$wv_pred),
rep(list(list_of_preds[[i]][[j]]$ground_truth),6))
plot_title<-switch(j,
"TOD & GOSE",
"TFR & GOSE",
"TOD & Favorable GOSE",
"TFR & Favorable GOSE",
"TOD & Death",
"TFR & Death")
print(paste0(filePath,plot_title,".png"))
png(paste0(filePath,plot_title,".png"))
plot(out$perf, col="grey82", lty=3)
plot(out$perf, col="red", avg="vertical", add=TRUE)
title (paste("5-fold CV AUC:",plot_title))
dev.off()
}
}
}
#draw_auc_plots(self_val_predictionsDis)
#draw_auc_plots(self_val_predictions12mo)
draw_auc_plots(test_val_predictionsDis)
dir.create("../plots/2020-04-26/test_val_predictionsDis/Fold1/")
dir.create("../plots/2020-04-26/test_val_predictionsDis/Fold1/",recursive = T)
draw_auc_plots <- function(list_of_preds){
for(i in seq_along(list_of_preds)){
filePath = generateRootDir(paste0(deparse(substitute(list_of_preds)),"/Fold",i,"/"))
print(filePath)
dir.create(filePath, recursive=TRUE,showWarnings = FALSE)
for(j in seq_along(list_of_preds[[i]])){
out<-cvAUC(list(list_of_preds[[i]][[j]]$bp_pred,
list_of_preds[[i]][[j]]$fe_pred,
list_of_preds[[i]][[j]]$fp_pred,
list_of_preds[[i]][[j]]$mf_pred,
list_of_preds[[i]][[j]]$sm_pred,
list_of_preds[[i]][[j]]$wv_pred),
rep(list(list_of_preds[[i]][[j]]$ground_truth),6))
plot_title<-switch(j,
"TOD & GOSE",
"TFR & GOSE",
"TOD & Favorable GOSE",
"TFR & Favorable GOSE",
"TOD & Death",
"TFR & Death")
print(paste0(filePath,plot_title,".png"))
png(paste0(filePath,plot_title,".png"))
plot(out$perf, col="grey82", lty=3)
plot(out$perf, col="red", avg="vertical", add=TRUE)
title (paste("5-fold CV AUC:",plot_title))
dev.off()
}
}
}
#draw_auc_plots(self_val_predictionsDis)
#draw_auc_plots(self_val_predictions12mo)
draw_auc_plots(test_val_predictionsDis)
dir.create("../plots/2020-04-26/test_val_predictionsDis/Fold1/1.png",recursive=T)
mkdir("../plots/2020-04-26/test_val_predictionsDis/Fold1/1.png",recursive=T)
draw_auc_plots <- function(list_of_preds){
for(i in seq_along(list_of_preds)){
filePath = generateRootDir(paste0(deparse(substitute(list_of_preds)),"/Fold",i,"/"))
print(filePath)
dir.create(filePath, recursive=TRUE,showWarnings = FALSE)
for(j in seq_along(list_of_preds[[i]])){
out<-cvAUC(list(list_of_preds[[i]][[j]]$bp_pred,
list_of_preds[[i]][[j]]$fe_pred,
list_of_preds[[i]][[j]]$fp_pred,
list_of_preds[[i]][[j]]$mf_pred,
list_of_preds[[i]][[j]]$sm_pred,
list_of_preds[[i]][[j]]$wv_pred),
rep(list(list_of_preds[[i]][[j]]$ground_truth),6))
plot_title<-switch(j,
"TOD & GOSE",
"TFR & GOSE",
"TOD & Favorable GOSE",
"TFR & Favorable GOSE",
"TOD & Death",
"TFR & Death")
print(paste0(filePath,plot_title,".png"))
png(paste0(filePath,plot_title,".png"))
plot(out$perf, col="grey82", lty=3)
plot(out$perf, col="red", avg="vertical", add=TRUE)
title (paste("5-fold CV AUC:",plot_title))
dev.off()
}
}
}
#draw_auc_plots(self_val_predictionsDis)
#draw_auc_plots(self_val_predictions12mo)
draw_auc_plots(test_val_predictionsDis)
dir.create("../plots/2020-04-26/test_val_predictionsDis/Fold1/", recursive=TRUE,showWarnings = FALSE)
dev.off()
draw_auc_plots <- function(list_of_preds){
for(i in seq_along(list_of_preds)){
filePath = generateRootDir(paste0(deparse(substitute(list_of_preds)),"/Fold",i,"/"))
print(filePath)
dir.create(filePath, recursive=TRUE,showWarnings = FALSE)}}
draw_auc_plots <- function(list_of_preds){
for(i in seq_along(list_of_preds)){
filePath = generateRootDir(paste0(deparse(substitute(list_of_preds)),"/Fold",i,"/"))
print(filePath)
print("hi")
dir.create(filePath, recursive=TRUE,showWarnings = FALSE)}}
draw_auc_plots <- function(list_of_preds){
for(i in seq_along(list_of_preds)){
filePath = generateRootDir(paste0(deparse(substitute(list_of_preds)),"/Fold",i,"/"))
print(filePath)
print("hi")}}
#dir.create(filePath, recursive=TRUE,showWarnings = FALSE)}}
draw_auc_plots <- function(list_of_preds){
for(i in seq_along(list_of_preds)){
filePath = generateRootDir(paste0(deparse(substitute(list_of_preds)),"/Fold",i,"/"))
print(filePath)
print("hi")}}
#dir.create(filePath, recursive=TRUE,showWarnings = FALSE)}}
draw_auc_plots(test_val_predictionsDis)
draw_auc_plots <- function(list_of_preds){
for(i in seq_along(list_of_preds)){
filePath = generateRootDir(paste0(deparse(substitute(list_of_preds)),"/Fold",i,"/"))
print(filePath)
print("hi")
dir.create(filePath, recursive=TRUE,showWarnings = FALSE)}}
draw_auc_plots(test_val_predictionsDis)
knitr::opts_chunk$set(echo = TRUE)
library(devtools)
if (!require(lolR)) install_github('neurodata/lol', build_vignettes=TRUE, force=TRUE)
library(lolR)
library(R.matlab)
library(tidyverse)
library(ggplot2)
library(plotly)
library(naniar)
library(MASS)
library(caret)
#source("./functions/generateRootDir.R")
draw_auc_plots <- function(list_of_preds){
for(i in seq_along(list_of_preds)){
filePath = generateRootDir(paste0(deparse(substitute(list_of_preds)),"/Fold",i,"/"))
print(filePath)
print("hi")
dir.create(filePath, recursive=TRUE,showWarnings = FALSE)}}
draw_auc_plots(test_val_predictionsDis)
knitr::opts_chunk$set(echo = TRUE)
library(devtools)
if (!require(lolR)) install_github('neurodata/lol', build_vignettes=TRUE, force=TRUE)
library(lolR)
library(R.matlab)
library(tidyverse)
library(ggplot2)
library(plotly)
library(naniar)
library(MASS)
library(caret)
source("./functions/generateRootDir.R")
getwd()
knitr::opts_chunk$set(echo = TRUE)
library(devtools)
if (!require(lolR)) install_github('neurodata/lol', build_vignettes=TRUE, force=TRUE)
library(lolR)
library(R.matlab)
library(tidyverse)
library(ggplot2)
library(plotly)
library(naniar)
library(MASS)
library(caret)
source("/functions/generateRootDir.R")
source('~/Documents/bims/scripts/master9_glm_classification.R', echo=TRUE)
knitr::opts_chunk$set(echo = TRUE)
library(devtools)
if (!require(lolR)) install_github('neurodata/lol', build_vignettes=TRUE, force=TRUE)
library(lolR)
library(R.matlab)
library(tidyverse)
library(ggplot2)
library(plotly)
library(naniar)
library(MASS)
library(caret)
source("../functions/generateRootDir.R")
draw_auc_plots <- function(list_of_preds){
for(i in seq_along(list_of_preds)){
filePath = paste0("../",generateRootDir(paste0(deparse(substitute(list_of_preds)),"/Fold",i,"/")))
print(filePath)
dir.create(filePath, recursive=TRUE,showWarnings = FALSE)
for(j in seq_along(list_of_preds[[i]])){
out<-cvAUC(list(list_of_preds[[i]][[j]]$bp_pred,
list_of_preds[[i]][[j]]$fe_pred,
list_of_preds[[i]][[j]]$fp_pred,
list_of_preds[[i]][[j]]$mf_pred,
list_of_preds[[i]][[j]]$sm_pred,
list_of_preds[[i]][[j]]$wv_pred),
rep(list(list_of_preds[[i]][[j]]$ground_truth),6))
plot_title<-switch(j,
"TOD & GOSE",
"TFR & GOSE",
"TOD & Favorable GOSE",
"TFR & Favorable GOSE",
"TOD & Death",
"TFR & Death")
print(paste0(filePath,plot_title,".png"))
png(paste0(filePath,plot_title,".png"))
plot(out$perf, col="grey82", lty=3)
plot(out$perf, col="red", avg="vertical", add=TRUE)
title (paste("5-fold CV AUC:",plot_title))
dev.off()
}
}
}
#draw_auc_plots(self_val_predictionsDis)
#draw_auc_plots(self_val_predictions12mo)
draw_auc_plots(test_val_predictionsDis)
#draw_auc_plots(test_val_predictions12mo)
draw_auc_plots <- function(list_of_preds){
for(i in seq_along(list_of_preds)){
filePath = paste0("../",generateRootDir(paste0(deparse(substitute(list_of_preds)),"/Fold",i,"/")))
print(filePath)
dir.create(filePath, recursive=TRUE,showWarnings = FALSE)
for(j in seq_along(list_of_preds[[i]])){
out<-cvAUC(list(list_of_preds[[i]][[j]]$bp_pred,
list_of_preds[[i]][[j]]$fe_pred,
list_of_preds[[i]][[j]]$fp_pred,
list_of_preds[[i]][[j]]$mf_pred,
list_of_preds[[i]][[j]]$sm_pred,
list_of_preds[[i]][[j]]$wv_pred),
rep(list(list_of_preds[[i]][[j]]$ground_truth),6))
plot_title<-switch(j,
"TOD & GOSE",
"TFR & GOSE",
"TOD & Favorable GOSE",
"TFR & Favorable GOSE",
"TOD & Death",
"TFR & Death")
png(paste0(filePath,plot_title,".png"))
plot(out$perf, col="grey82", lty=3)
plot(out$perf, col="red", avg="vertical", add=TRUE)
title (paste("5-fold CV AUC:",plot_title))
dev.off()
}
}
}
draw_auc_plots(self_val_predictionsDis)
draw_auc_plots(self_val_predictions12mo)
draw_auc_plots(test_val_predictionsDis)
draw_auc_plots(test_val_predictions12mo)
draw_auc_plots <- function(list_of_preds){
for(i in seq_along(list_of_preds)){
filePath = paste0("../",generateRootDir(paste0(deparse(substitute(list_of_preds)),"/Fold",i,"/")))
print(filePath)
dir.create(filePath, recursive=TRUE,showWarnings = FALSE)
for(j in seq_along(list_of_preds[[i]])){
out<-cvAUC(list(list_of_preds[[i]][[j]]$bp_pred,
list_of_preds[[i]][[j]]$fe_pred,
list_of_preds[[i]][[j]]$fp_pred,
list_of_preds[[i]][[j]]$mf_pred,
list_of_preds[[i]][[j]]$sm_pred,
list_of_preds[[i]][[j]]$wv_pred),
rep(list(list_of_preds[[i]][[j]]$ground_truth),6))
plot_title<-switch(j,
"TOD & GOSE",
"TFR & GOSE",
"TOD & Favorable GOSE",
"TFR & Favorable GOSE",
"TOD & Death",
"TFR & Death")
png(paste0(filePath,plot_title,".png"))
plot(out$perf, col="grey", lty=3)
plot(out$perf, col="red", avg="vertical", add=TRUE)
title (paste("5-fold CV AUC:",plot_title))
dev.off()
}
}
}
draw_auc_plots(self_val_predictionsDis)
draw_auc_plots(self_val_predictions12mo)
draw_auc_plots(test_val_predictionsDis)
draw_auc_plots(test_val_predictions12mo)
View(test_val_predictionsDis)
View(test_val_predictions12mo)
test_val_predictions12mo[[1]][[1]]$ground_truth
test_val_predictions12mo[[1]][[1]]$bp_pred
test_val_predictions12mo[[1]][[1]]$fe_pred
na.omit(test_val_predictions12mo[[1]][[1]])$fe_pred
na.omit(test_val_predictions12mo)[[1]][[1]]$fe_pred
draw_auc_plots <- function(list_of_preds){
list_of_preds %>% na.omit()
for(i in seq_along(list_of_preds)){
filePath = paste0("../",generateRootDir(paste0(deparse(substitute(list_of_preds)),"/Fold",i,"/")))
dir.create(filePath, recursive=TRUE,showWarnings = FALSE)
for(j in seq_along(list_of_preds[[i]])){
out<-cvAUC(list(list_of_preds[[i]][[j]]$bp_pred,
list_of_preds[[i]][[j]]$fe_pred,
list_of_preds[[i]][[j]]$fp_pred,
list_of_preds[[i]][[j]]$mf_pred,
list_of_preds[[i]][[j]]$sm_pred,
list_of_preds[[i]][[j]]$wv_pred),
rep(list(list_of_preds[[i]][[j]]$ground_truth),6))
plot_title<-switch(j,
"TOD & GOSE",
"TFR & GOSE",
"TOD & Favorable GOSE",
"TFR & Favorable GOSE",
"TOD & Death",
"TFR & Death")
png(paste0(filePath,plot_title,".png"))
plot(out$perf, col="grey", lty=3)
plot(out$perf, col="red", avg="vertical", add=TRUE)
title (paste("5-fold CV AUC:",plot_title))
dev.off()
}
}
}
draw_auc_plots(self_val_predictionsDis)
draw_auc_plots(self_val_predictions12mo)
draw_auc_plots(test_val_predictionsDis)
draw_auc_plots(test_val_predictions12mo)
draw_auc_plots <- function(list_of_preds){
list_of_preds <-na.omit(list_of_preds)
for(i in seq_along(list_of_preds)){
filePath = paste0("../",generateRootDir(paste0(deparse(substitute(list_of_preds)),"/Fold",i,"/")))
dir.create(filePath, recursive=TRUE,showWarnings = FALSE)
for(j in seq_along(list_of_preds[[i]])){
out<-cvAUC(list(list_of_preds[[i]][[j]]$bp_pred,
list_of_preds[[i]][[j]]$fe_pred,
list_of_preds[[i]][[j]]$fp_pred,
list_of_preds[[i]][[j]]$mf_pred,
list_of_preds[[i]][[j]]$sm_pred,
list_of_preds[[i]][[j]]$wv_pred),
rep(list(list_of_preds[[i]][[j]]$ground_truth),6))
plot_title<-switch(j,
"TOD & GOSE",
"TFR & GOSE",
"TOD & Favorable GOSE",
"TFR & Favorable GOSE",
"TOD & Death",
"TFR & Death")
png(paste0(filePath,plot_title,".png"))
plot(out$perf, col="grey", lty=3)
plot(out$perf, col="red", avg="vertical", add=TRUE)
title (paste("5-fold CV AUC:",plot_title))
dev.off()
}
}
}
draw_auc_plots(self_val_predictionsDis)
draw_auc_plots <- function(list_of_preds){
list_of_preds <-na.omit(list_of_preds)
for(i in seq_along(list_of_preds)){
filePath = paste0("../",generateRootDir(paste0(deparse(substitute(list_of_preds)),"/Fold",i,"/")))
print(filePath)
dir.create(filePath, recursive=TRUE,showWarnings = FALSE)
for(j in seq_along(list_of_preds[[i]])){
out<-cvAUC(list(list_of_preds[[i]][[j]]$bp_pred,
list_of_preds[[i]][[j]]$fe_pred,
list_of_preds[[i]][[j]]$fp_pred,
list_of_preds[[i]][[j]]$mf_pred,
list_of_preds[[i]][[j]]$sm_pred,
list_of_preds[[i]][[j]]$wv_pred),
rep(list(list_of_preds[[i]][[j]]$ground_truth),6))
plot_title<-switch(j,
"TOD & GOSE",
"TFR & GOSE",
"TOD & Favorable GOSE",
"TFR & Favorable GOSE",
"TOD & Death",
"TFR & Death")
png(paste0(filePath,plot_title,".png"))
plot(out$perf, col="grey", lty=3)
plot(out$perf, col="red", avg="vertical", add=TRUE)
title (paste("5-fold CV AUC:",plot_title))
dev.off()
}
}
}
draw_auc_plots(self_val_predictionsDis)
draw_auc_plots <- function(list_of_preds){
for(i in seq_along(list_of_preds)){
filePath = paste0("../",generateRootDir(paste0(deparse(substitute(list_of_preds)),"/Fold",i,"/")))
dir.create(filePath, recursive=TRUE,showWarnings = FALSE)
for(j in seq_along(list_of_preds[[i]])){
out<-cvAUC(list(list_of_preds[[i]][[j]]$bp_pred,
list_of_preds[[i]][[j]]$fe_pred,
list_of_preds[[i]][[j]]$fp_pred,
list_of_preds[[i]][[j]]$mf_pred,
list_of_preds[[i]][[j]]$sm_pred,
list_of_preds[[i]][[j]]$wv_pred),
rep(list(list_of_preds[[i]][[j]]$ground_truth),6))
plot_title<-switch(j,
"TOD & GOSE",
"TFR & GOSE",
"TOD & Favorable GOSE",
"TFR & Favorable GOSE",
"TOD & Death",
"TFR & Death")
png(paste0(filePath,plot_title,".png"))
plot(out$perf, col="grey", lty=3)
plot(out$perf, col="red", avg="vertical", add=TRUE)
title (paste("5-fold CV AUC:",plot_title))
dev.off()
}
}
}
draw_auc_plots(self_val_predictionsDis)
draw_auc_plots(self_val_predictions12mo)
draw_auc_plots(test_val_predictionsDis)
draw_auc_plots(test_val_predictions12mo)
na.omit(self_val_predictionsDis)[[1]][[1]]$ground_truth
self_val_predictionsDis[[1]][[1]]$ground_truth
test_val_predictions12mo[[1]][[1]]$ground_truth
na.omit(test_val_predictions12mo)[[1]][[1]]$ground_truth
na.omit(test_val_predictions12mo[[1]][[1]])$ground_truth
na.omit.list(test_val_predictions12mo)[[1]][[1]]$ground_truth
draw_auc_plots <- function(list_of_preds){
for(i in seq_along(list_of_preds)){
filePath = paste0("../",generateRootDir(paste0(deparse(substitute(list_of_preds)),"/Fold",i,"/")))
dir.create(filePath, recursive=TRUE,showWarnings = FALSE)
for(j in seq_along(list_of_preds[[i]])){
out<-cvAUC(list(na.omit(list_of_preds[[i]][[j]])$bp_pred,
na.omit(list_of_preds[[i]][[j]])$fe_pred,
na.omit(list_of_preds[[i]][[j]])$fp_pred,
na.omit(list_of_preds[[i]][[j]])$mf_pred,
na.omit(list_of_preds[[i]][[j]])$sm_pred,
na.omit(list_of_preds[[i]][[j]])$wv_pred),
rep(list(na.omit(list_of_preds[[i]][[j]])$ground_truth),6))
plot_title<-switch(j,
"TOD & GOSE",
"TFR & GOSE",
"TOD & Favorable GOSE",
"TFR & Favorable GOSE",
"TOD & Death",
"TFR & Death")
png(paste0(filePath,plot_title,".png"))
plot(out$perf, col="grey", lty=3)
plot(out$perf, col="red", avg="vertical", add=TRUE)
title (paste("5-fold CV AUC:",plot_title))
dev.off()
}
}
}
draw_auc_plots(self_val_predictionsDis)
draw_auc_plots(self_val_predictions12mo)
draw_auc_plots(test_val_predictionsDis)
draw_auc_plots(test_val_predictions12mo)
View(test_val_predictions12mo)
View(test_val_predictions12mo[[1]]$tod_GOSE_test_val)
